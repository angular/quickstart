{"version":3,"sources":["injector.js"],"names":[],"mappings":"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","file":"src/di/injector.js","sourceRoot":"/Users/justin/workspace/angular2_quckstart/quickstart/node_modules/angular2/es6/prod/","sourcesContent":["import {Map,\n  List,\n  MapWrapper,\n  ListWrapper} from 'angular2/src/facade/collection';\nimport {Binding,\n  BindingBuilder,\n  bind} from './binding';\nimport {ProviderError,\n  NoProviderError,\n  InvalidBindingError,\n  AsyncBindingError,\n  CyclicDependencyError,\n  InstantiationError} from './exceptions';\nimport {FunctionWrapper,\n  Type,\n  isPresent,\n  isBlank} from 'angular2/src/facade/lang';\nimport {Promise,\n  PromiseWrapper} from 'angular2/src/facade/async';\nimport {Key} from './key';\nvar _constructing = new Object();\nvar _notFound = new Object();\nclass _Waiting {\n  constructor(promise) {\n    this.promise = promise;\n  }\n}\nObject.defineProperty(_Waiting, \"parameters\", {get: function() {\n    return [[Promise]];\n  }});\nfunction _isWaiting(obj) {\n  return obj instanceof _Waiting;\n}\nexport class Injector {\n  constructor(bindings, {parent = null,\n    defaultBindings = false} = {}) {\n    var flatten = _flattenBindings(bindings, MapWrapper.create());\n    this._bindings = this._createListOfBindings(flatten);\n    this._instances = this._createInstances();\n    this._parent = parent;\n    this._defaultBindings = defaultBindings;\n    this._asyncStrategy = new _AsyncInjectorStrategy(this);\n    this._syncStrategy = new _SyncInjectorStrategy(this);\n  }\n  get(token) {\n    return this._getByKey(Key.get(token), false, false, false);\n  }\n  getOptional(token) {\n    return this._getByKey(Key.get(token), false, false, true);\n  }\n  asyncGet(token) {\n    return this._getByKey(Key.get(token), true, false, false);\n  }\n  createChild(bindings) {\n    return new Injector(bindings, {parent: this});\n  }\n  _createListOfBindings(flattenBindings) {\n    var bindings = ListWrapper.createFixedSize(Key.numberOfKeys + 1);\n    MapWrapper.forEach(flattenBindings, (v, keyId) => bindings[keyId] = v);\n    return bindings;\n  }\n  _createInstances() {\n    return ListWrapper.createFixedSize(Key.numberOfKeys + 1);\n  }\n  _getByKey(key, returnPromise, returnLazy, optional) {\n    if (returnLazy) {\n      return () => this._getByKey(key, returnPromise, false, optional);\n    }\n    var strategy = returnPromise ? this._asyncStrategy : this._syncStrategy;\n    var instance = strategy.readFromCache(key);\n    if (instance !== _notFound)\n      return instance;\n    instance = strategy.instantiate(key);\n    if (instance !== _notFound)\n      return instance;\n    if (isPresent(this._parent)) {\n      return this._parent._getByKey(key, returnPromise, returnLazy, optional);\n    }\n    if (optional) {\n      return null;\n    } else {\n      throw new NoProviderError(key);\n    }\n  }\n  _resolveDependencies(key, binding, forceAsync) {\n    try {\n      var getDependency = (d) => this._getByKey(d.key, forceAsync || d.asPromise, d.lazy, d.optional);\n      return ListWrapper.map(binding.dependencies, getDependency);\n    } catch (e) {\n      this._clear(key);\n      if (e instanceof ProviderError)\n        e.addKey(key);\n      throw e;\n    }\n  }\n  _getInstance(key) {\n    if (this._instances.length <= key.id)\n      return null;\n    return ListWrapper.get(this._instances, key.id);\n  }\n  _setInstance(key, obj) {\n    ListWrapper.set(this._instances, key.id, obj);\n  }\n  _getBinding(key) {\n    var binding = this._bindings.length <= key.id ? null : ListWrapper.get(this._bindings, key.id);\n    if (isBlank(binding) && this._defaultBindings) {\n      return bind(key.token).toClass(key.token);\n    } else {\n      return binding;\n    }\n  }\n  _markAsConstructing(key) {\n    this._setInstance(key, _constructing);\n  }\n  _clear(key) {\n    this._setInstance(key, null);\n  }\n}\nObject.defineProperty(Injector, \"parameters\", {get: function() {\n    return [[List], []];\n  }});\nObject.defineProperty(Injector.prototype.createChild, \"parameters\", {get: function() {\n    return [[List]];\n  }});\nObject.defineProperty(Injector.prototype._getByKey, \"parameters\", {get: function() {\n    return [[Key], [assert.type.boolean], [assert.type.boolean], [assert.type.boolean]];\n  }});\nObject.defineProperty(Injector.prototype._resolveDependencies, \"parameters\", {get: function() {\n    return [[Key], [Binding], [assert.type.boolean]];\n  }});\nObject.defineProperty(Injector.prototype._getInstance, \"parameters\", {get: function() {\n    return [[Key]];\n  }});\nObject.defineProperty(Injector.prototype._setInstance, \"parameters\", {get: function() {\n    return [[Key], []];\n  }});\nObject.defineProperty(Injector.prototype._getBinding, \"parameters\", {get: function() {\n    return [[Key]];\n  }});\nObject.defineProperty(Injector.prototype._markAsConstructing, \"parameters\", {get: function() {\n    return [[Key]];\n  }});\nObject.defineProperty(Injector.prototype._clear, \"parameters\", {get: function() {\n    return [[Key]];\n  }});\nclass _SyncInjectorStrategy {\n  constructor(injector) {\n    this.injector = injector;\n  }\n  readFromCache(key) {\n    if (key.token === Injector) {\n      return this.injector;\n    }\n    var instance = this.injector._getInstance(key);\n    if (instance === _constructing) {\n      throw new CyclicDependencyError(key);\n    } else if (isPresent(instance) && !_isWaiting(instance)) {\n      return instance;\n    } else {\n      return _notFound;\n    }\n  }\n  instantiate(key) {\n    var binding = this.injector._getBinding(key);\n    if (isBlank(binding))\n      return _notFound;\n    if (binding.providedAsPromise)\n      throw new AsyncBindingError(key);\n    this.injector._markAsConstructing(key);\n    var deps = this.injector._resolveDependencies(key, binding, false);\n    return this._createInstance(key, binding, deps);\n  }\n  _createInstance(key, binding, deps) {\n    try {\n      var instance = FunctionWrapper.apply(binding.factory, deps);\n      this.injector._setInstance(key, instance);\n      return instance;\n    } catch (e) {\n      this.injector._clear(key);\n      throw new InstantiationError(e, key);\n    }\n  }\n}\nObject.defineProperty(_SyncInjectorStrategy, \"parameters\", {get: function() {\n    return [[Injector]];\n  }});\nObject.defineProperty(_SyncInjectorStrategy.prototype.readFromCache, \"parameters\", {get: function() {\n    return [[Key]];\n  }});\nObject.defineProperty(_SyncInjectorStrategy.prototype.instantiate, \"parameters\", {get: function() {\n    return [[Key]];\n  }});\nObject.defineProperty(_SyncInjectorStrategy.prototype._createInstance, \"parameters\", {get: function() {\n    return [[Key], [Binding], [List]];\n  }});\nclass _AsyncInjectorStrategy {\n  constructor(injector) {\n    this.injector = injector;\n  }\n  readFromCache(key) {\n    if (key.token === Injector) {\n      return PromiseWrapper.resolve(this.injector);\n    }\n    var instance = this.injector._getInstance(key);\n    if (instance === _constructing) {\n      throw new CyclicDependencyError(key);\n    } else if (_isWaiting(instance)) {\n      return instance.promise;\n    } else if (isPresent(instance)) {\n      return PromiseWrapper.resolve(instance);\n    } else {\n      return _notFound;\n    }\n  }\n  instantiate(key) {\n    var binding = this.injector._getBinding(key);\n    if (isBlank(binding))\n      return _notFound;\n    this.injector._markAsConstructing(key);\n    var deps = this.injector._resolveDependencies(key, binding, true);\n    var depsPromise = PromiseWrapper.all(deps);\n    var promise = PromiseWrapper.then(depsPromise, null, (e) => this._errorHandler(key, e)).then((deps) => this._findOrCreate(key, binding, deps)).then((instance) => this._cacheInstance(key, instance));\n    this.injector._setInstance(key, new _Waiting(promise));\n    return promise;\n  }\n  _errorHandler(key, e) {\n    if (e instanceof ProviderError)\n      e.addKey(key);\n    return PromiseWrapper.reject(e);\n  }\n  _findOrCreate(key, binding, deps) {\n    try {\n      var instance = this.injector._getInstance(key);\n      if (!_isWaiting(instance))\n        return instance;\n      return FunctionWrapper.apply(binding.factory, deps);\n    } catch (e) {\n      this.injector._clear(key);\n      throw new InstantiationError(e, key);\n    }\n  }\n  _cacheInstance(key, instance) {\n    this.injector._setInstance(key, instance);\n    return instance;\n  }\n}\nObject.defineProperty(_AsyncInjectorStrategy, \"parameters\", {get: function() {\n    return [[Injector]];\n  }});\nObject.defineProperty(_AsyncInjectorStrategy.prototype.readFromCache, \"parameters\", {get: function() {\n    return [[Key]];\n  }});\nObject.defineProperty(_AsyncInjectorStrategy.prototype.instantiate, \"parameters\", {get: function() {\n    return [[Key]];\n  }});\nObject.defineProperty(_AsyncInjectorStrategy.prototype._errorHandler, \"parameters\", {get: function() {\n    return [[Key], []];\n  }});\nObject.defineProperty(_AsyncInjectorStrategy.prototype._findOrCreate, \"parameters\", {get: function() {\n    return [[Key], [Binding], [List]];\n  }});\nfunction _flattenBindings(bindings, res) {\n  ListWrapper.forEach(bindings, function(b) {\n    if (b instanceof Binding) {\n      MapWrapper.set(res, b.key.id, b);\n    } else if (b instanceof Type) {\n      var s = bind(b).toClass(b);\n      MapWrapper.set(res, s.key.id, s);\n    } else if (b instanceof List) {\n      _flattenBindings(b, res);\n    } else if (b instanceof BindingBuilder) {\n      throw new InvalidBindingError(b.token);\n    } else {\n      throw new InvalidBindingError(b);\n    }\n  });\n  return res;\n}\nObject.defineProperty(_flattenBindings, \"parameters\", {get: function() {\n    return [[List], [Map]];\n  }});\n//# sourceMappingURL=injector.js.map\n\n//# sourceMappingURL=./injector.map"]}