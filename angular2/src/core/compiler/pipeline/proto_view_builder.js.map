{"version":3,"sources":["proto_view_builder.js"],"names":[],"mappings":"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","file":"src/core/compiler/pipeline/proto_view_builder.js","sourceRoot":"/Users/justin/workspace/angular2_quckstart/quickstart/node_modules/angular2/es6/prod/","sourcesContent":["import {isPresent,\n  BaseException} from 'angular2/src/facade/lang';\nimport {ListWrapper,\n  MapWrapper} from 'angular2/src/facade/collection';\nimport {ProtoView} from '../view';\nimport {ChangeDetection} from 'angular2/change_detection';\nimport {CompileStep} from './compile_step';\nimport {CompileElement} from './compile_element';\nimport {CompileControl} from './compile_control';\nimport {ShadowDomStrategy} from '../shadow_dom_strategy';\nexport class ProtoViewBuilder extends CompileStep {\n  constructor(changeDetection, shadowDomStrategy) {\n    super();\n    this._shadowDomStrategy = shadowDomStrategy;\n    this.changeDetection = changeDetection;\n  }\n  process(parent, current, control) {\n    var inheritedProtoView = null;\n    if (current.isViewRoot) {\n      var protoChangeDetector = this.changeDetection.createProtoChangeDetector('dummy');\n      inheritedProtoView = new ProtoView(current.element, protoChangeDetector, this._shadowDomStrategy, this._getParentProtoView(parent));\n      if (isPresent(parent)) {\n        if (isPresent(parent.inheritedElementBinder.nestedProtoView)) {\n          throw new BaseException('Only one nested view per element is allowed');\n        }\n        parent.inheritedElementBinder.nestedProtoView = inheritedProtoView;\n        if (isPresent(parent.variableBindings)) {\n          MapWrapper.forEach(parent.variableBindings, (mappedName, varName) => {\n            inheritedProtoView.bindVariable(varName, mappedName);\n          });\n        }\n      }\n    } else if (isPresent(parent)) {\n      inheritedProtoView = parent.inheritedProtoView;\n    }\n    if (isPresent(current.variableBindings)) {\n      MapWrapper.forEach(current.variableBindings, (mappedName, varName) => {\n        MapWrapper.set(inheritedProtoView.protoLocals, mappedName, null);\n      });\n    }\n    current.inheritedProtoView = inheritedProtoView;\n  }\n  _getParentProtoView(parent) {\n    return isPresent(parent) ? parent.inheritedProtoView : null;\n  }\n}\nObject.defineProperty(ProtoViewBuilder, \"parameters\", {get: function() {\n    return [[ChangeDetection], [ShadowDomStrategy]];\n  }});\nObject.defineProperty(ProtoViewBuilder.prototype.process, \"parameters\", {get: function() {\n    return [[CompileElement], [CompileElement], [CompileControl]];\n  }});\nObject.defineProperty(ProtoViewBuilder.prototype._getParentProtoView, \"parameters\", {get: function() {\n    return [[CompileElement]];\n  }});\n//# sourceMappingURL=proto_view_builder.js.map\n\n//# sourceMappingURL=./proto_view_builder.map"]}