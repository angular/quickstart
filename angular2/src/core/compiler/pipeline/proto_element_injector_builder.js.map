{"version":3,"sources":["proto_element_injector_builder.js"],"names":[],"mappings":"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","file":"src/core/compiler/pipeline/proto_element_injector_builder.js","sourceRoot":"/Users/justin/workspace/angular2_quckstart/quickstart/node_modules/angular2/es6/prod/","sourcesContent":["import {isPresent,\n  isBlank} from 'angular2/src/facade/lang';\nimport {ListWrapper,\n  MapWrapper} from 'angular2/src/facade/collection';\nimport {ProtoElementInjector,\n  ComponentKeyMetaData,\n  DirectiveBinding} from '../element_injector';\nimport {CompileStep} from './compile_step';\nimport {CompileElement} from './compile_element';\nimport {CompileControl} from './compile_control';\nimport {DirectiveMetadata} from '../directive_metadata';\nexport class ProtoElementInjectorBuilder extends CompileStep {\n  internalCreateProtoElementInjector(parent, index, directives, firstBindingIsComponent, distance) {\n    return new ProtoElementInjector(parent, index, directives, firstBindingIsComponent, distance);\n  }\n  process(parent, current, control) {\n    var distanceToParentInjector = this._getDistanceToParentInjector(parent, current);\n    var parentProtoElementInjector = this._getParentProtoElementInjector(parent, current);\n    var injectorBindings = ListWrapper.map(current.getAllDirectives(), this._createBinding);\n    if (injectorBindings.length > 0 || isPresent(current.variableBindings)) {\n      var protoView = current.inheritedProtoView;\n      var hasComponent = isPresent(current.componentDirective);\n      current.inheritedProtoElementInjector = this.internalCreateProtoElementInjector(parentProtoElementInjector, protoView.elementBinders.length, injectorBindings, hasComponent, distanceToParentInjector);\n      current.distanceToParentInjector = 0;\n      if (isPresent(current.variableBindings) && !isPresent(current.viewportDirective)) {\n        current.inheritedProtoElementInjector.exportComponent = hasComponent;\n        current.inheritedProtoElementInjector.exportElement = !hasComponent;\n        var exportImplicitName = MapWrapper.get(current.variableBindings, '\\$implicit');\n        if (isPresent(exportImplicitName)) {\n          current.inheritedProtoElementInjector.exportImplicitName = exportImplicitName;\n        }\n      }\n      current.inheritedProtoElementInjector.attributes = current.attributes;\n    } else {\n      current.inheritedProtoElementInjector = parentProtoElementInjector;\n      current.distanceToParentInjector = distanceToParentInjector;\n    }\n  }\n  _getDistanceToParentInjector(parent, current) {\n    return isPresent(parent) ? parent.distanceToParentInjector + 1 : 0;\n  }\n  _getParentProtoElementInjector(parent, current) {\n    if (isPresent(parent) && !current.isViewRoot) {\n      return parent.inheritedProtoElementInjector;\n    }\n    return null;\n  }\n  _createBinding(d) {\n    return DirectiveBinding.createFromType(d.type, d.annotation);\n  }\n}\nObject.defineProperty(ProtoElementInjectorBuilder.prototype.process, \"parameters\", {get: function() {\n    return [[CompileElement], [CompileElement], [CompileControl]];\n  }});\nObject.defineProperty(ProtoElementInjectorBuilder.prototype._createBinding, \"parameters\", {get: function() {\n    return [[DirectiveMetadata]];\n  }});\n//# sourceMappingURL=proto_element_injector_builder.js.map\n\n//# sourceMappingURL=./proto_element_injector_builder.map"]}