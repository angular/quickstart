{"version":3,"sources":["@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/3","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/6","@traceur/generated/TemplateParser/12","src/core/compiler/pipeline/proto_element_injector_builder.js","@traceur/generated/TemplateParser/15","src/core/compiler/pipeline/@traceur/generated/TemplateParser/24"],"names":[],"mappings":"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","file":"src/core/compiler/pipeline/proto_element_injector_builder.js","sourceRoot":"/Users/deast/Angular/quickstart/node_modules/angular2/es6/prod/","sourcesContent":["System.register($__placeholder__0, function($__export) {\n          $__placeholder__1\n        });","return {\n      setters: $__placeholder__0,\n      execute: $__placeholder__1\n    }","function($__m) {\n          $__placeholder__0\n        }","$__placeholder__0 = $__m.$__placeholder__1;","var $__placeholder__0 = $__export($__placeholder__1, $__placeholder__2);","function($__super) {\n          var $__placeholder__0 = $__placeholder__1;\n          return ($traceurRuntime.createClass)($__placeholder__2, $__placeholder__3,\n                                               $__placeholder__4, $__super);\n        }($__placeholder__5)","import {isPresent, isBlank} from 'angular2/src/facade/lang';\nimport {ListWrapper, MapWrapper} from 'angular2/src/facade/collection';\n\nimport {ProtoElementInjector, ComponentKeyMetaData, DirectiveBinding} from '../element_injector';\n\nimport {CompileStep} from './compile_step';\nimport {CompileElement} from './compile_element';\nimport {CompileControl} from './compile_control';\nimport {DirectiveMetadata} from '../directive_metadata';\n\n/**\n * Creates the ProtoElementInjectors.\n *\n * Fills:\n * - CompileElement#inheritedProtoElementInjector\n * - CompileElement#distanceToParentInjector\n *\n * Reads:\n * - (in parent) CompileElement#inheritedProtoElementInjector\n * - (in parent) CompileElement#distanceToParentInjector\n * - CompileElement#isViewRoot\n * - CompileElement#inheritedProtoView\n * - CompileElement#decoratorDirectives\n * - CompileElement#componentDirective\n * - CompileElement#viewportDirective\n */\nexport class ProtoElementInjectorBuilder extends CompileStep {\n  // public so that we can overwrite it in tests\n  internalCreateProtoElementInjector(parent, index, directives, firstBindingIsComponent, distance) {\n    return new ProtoElementInjector(parent, index, directives, firstBindingIsComponent, distance);\n  }\n\n  process(parent:CompileElement, current:CompileElement, control:CompileControl) {\n    var distanceToParentInjector = this._getDistanceToParentInjector(parent, current);\n    var parentProtoElementInjector = this._getParentProtoElementInjector(parent, current);\n    var injectorBindings = ListWrapper.map(current.getAllDirectives(), this._createBinding);\n\n    // Create a protoElementInjector for any element that either has bindings *or* has one\n    // or more var- defined. Elements with a var- defined need a their own element injector\n    // so that, when hydrating, $implicit can be set to the element.\n    if (injectorBindings.length > 0 || isPresent(current.variableBindings)) {\n      var protoView = current.inheritedProtoView;\n      var hasComponent = isPresent(current.componentDirective);\n\n      current.inheritedProtoElementInjector = this.internalCreateProtoElementInjector(\n        parentProtoElementInjector, protoView.elementBinders.length, injectorBindings,\n        hasComponent, distanceToParentInjector\n      );\n      current.distanceToParentInjector = 0;\n\n      // Viewport directives are treated differently than other element with var- definitions.\n      if (isPresent(current.variableBindings) && !isPresent(current.viewportDirective)) {\n        current.inheritedProtoElementInjector.exportComponent = hasComponent;\n        current.inheritedProtoElementInjector.exportElement = !hasComponent;\n\n        // experiment\n        var exportImplicitName = MapWrapper.get(current.variableBindings, '\\$implicit');\n        if (isPresent(exportImplicitName)) {\n          current.inheritedProtoElementInjector.exportImplicitName = exportImplicitName;\n        }\n      }\n\n    } else {\n      current.inheritedProtoElementInjector = parentProtoElementInjector;\n      current.distanceToParentInjector = distanceToParentInjector;\n    }\n  }\n\n  _getDistanceToParentInjector(parent, current) {\n    return isPresent(parent) ? parent.distanceToParentInjector + 1 : 0;\n  }\n\n  _getParentProtoElementInjector(parent, current) {\n    if (isPresent(parent) && !current.isViewRoot) {\n      return parent.inheritedProtoElementInjector;\n    }\n    return null;\n  }\n\n  _createBinding(d:DirectiveMetadata): DirectiveBinding {\n    return DirectiveBinding.createFromType(d.type, d.annotation);\n  }\n}\n","$traceurRuntime.superConstructor(\n          $__placeholder__0).apply(this, arguments)","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});"]}