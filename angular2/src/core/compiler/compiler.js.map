{"version":3,"sources":["compiler.js"],"names":[],"mappings":"AAAA,KAAK,SAAS,AAAC,qcAAoB,UAAS,SAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAApD,OAAO;AACD,UAAM,GADZ,SAAS,IAAG,CAAG;AAAf,iBAAoB,KAAG,WAAkB,CAAC;IAElC,CAFR,UAAS,IAAG;AAAZ,WAAoB,KAAG,KAAkB,CAAC;AAA1C,cAAoB,KAAG,QAAkB,CAAC;AAA1C,gBAAoB,KAAG,UAAkB,CAAC;AAA1C,oBAAoB,KAAG,cAAkB,CAAC;AAA1C,qBAAoB,KAAG,eAAkB,CAAC;AAA1C,gBAAoB,KAAG,UAAkB,CAAC;IAElC,CAFR,UAAS,IAAG;AAAZ,cAAoB,KAAG,QAAkB,CAAC;AAA1C,qBAAoB,KAAG,eAAkB,CAAC;IAElC,CAFR,UAAS,IAAG;AAAZ,WAAoB,KAAG,KAAkB,CAAC;AAA1C,kBAAoB,KAAG,YAAkB,CAAC;AAA1C,UAAoB,KAAG,IAAkB,CAAC;AAA1C,iBAAoB,KAAG,WAAkB,CAAC;IAElC,CAFR,UAAS,IAAG;AAAZ,sBAAoB,KAAG,gBAAkB,CAAC;AAA1C,aAAoB,KAAG,OAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,8BAAoB,KAAG,wBAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,gBAAoB,KAAG,UAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,sBAAoB,KAAG,gBAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,qBAAoB,KAAG,eAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,yBAAoB,KAAG,mBAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,qBAAoB,KAAG,eAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,uBAAoB,KAAG,iBAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,eAAoB,KAAG,SAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,wBAAoB,KAAG,kBAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,kBAAoB,KAAG,YAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,yBAAoB,KAAG,mBAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,kBAAoB,KAAG,YAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,mBAAoB,KAAG,aAAkB,CAAC;IAElC,CADuB;AACzB,UAAM;oBAFY,CAAA,SAAQ,AAAC,mBAAjC,SAAQ,AAAC;AACC,AAAI,UAAA,gBA2BP,SAAM,cAAY,CACZ,AAAC,CAAE;AACZ,aAAG,OAAO,EAAI,CAAA,UAAS,OAAO,AAAC,EAAC,CAAC;QA7Ba,AA8BhD,CA9BiD;AACzC,aAAO,CAAA,CAAC,eAAc,YAAY,CAAC,AAAC;AA8B5C,YAAE,CAAF,UAAI,SAAQ,CAAG,CAAA,SAAQ,CAAG;AACxB,qBAAS,IAAI,AAAC,CAAC,IAAG,OAAO,CAAG,UAAQ,CAAG,UAAQ,CAAC,CAAC;UACnD;AACA,YAAE,CAAF,UAAI,SAAQ,CAAG;AACb,AAAI,cAAA,CAAA,MAAK,EAAI,CAAA,UAAS,IAAI,AAAC,CAAC,IAAG,OAAO,CAAG,UAAQ,CAAC,CAAC;AACnD,iBAAO,CAAA,cAAa,AAAC,CAAC,MAAK,CAAC,CAAC;UAC/B;AACA,cAAI,CAAJ,UAAK,AAAC,CAAE;AACN,qBAAS,MAAM,AAAC,CAAC,IAAG,OAAO,CAAC,CAAC;UAC/B;AAAA,aAtC8D,CAAC;MACzD,AAAC,EAAC,EAJ4D;AA2CtE,WAAK,eAAe,AAAC,CAAC,aAAY,CAAG,cAAY,CAAG,EAAC,GAAE,CAAG,UAAQ,AAAC,CAAE;AACjE,eAAO,EAAC,GAAI,WAAS,AAAC,EAAC,CAAC,CAAC;QAC3B,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,aAAY,UAAU,IAAI,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAQ,AAAC,CAAE;AAC9E,eAAO,EAAC,CAAC,IAAG,CAAC,CAAG,EAAC,SAAQ,CAAC,CAAC,CAAC;QAC9B,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,aAAY,UAAU,IAAI,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAQ,AAAC,CAAE;AAC9E,eAAO,EAAC,CAAC,IAAG,CAAC,CAAC,CAAC;QACjB,CAAC,CAAC,CAAC;eAnDmB,CAAA,SAAQ,AAAC,cAAjC,SAAQ,AAAC;AACC,AAAI,UAAA,WAmDP,SAAM,SAAO,CACN,eAAc,CAAG,CAAA,cAAa,CAAG,CAAA,MAAK,CAAG,CAAA,MAAK,CAAG,CAAA,KAAI,CAAG,CAAA,iBAAgB,CAAG,CAAA,gBAAe,CAAG,CAAA,kBAAiB,CAAG,CAAA,WAAU,CAAG,CAAA,YAAW,CAAG;AACtJ,aAAG,iBAAiB,EAAI,gBAAc,CAAC;AACvC,aAAG,QAAQ,EAAI,OAAK,CAAC;AACrB,aAAG,QAAQ,EAAI,OAAK,CAAC;AACrB,aAAG,eAAe,EAAI,MAAI,CAAC;AAC3B,aAAG,gBAAgB,EAAI,eAAa,CAAC;AACrC,aAAG,WAAW,EAAI,CAAA,UAAS,OAAO,AAAC,EAAC,CAAC;AACrC,aAAG,mBAAmB,EAAI,kBAAgB,CAAC;AAC3C,aAAG,kBAAkB,EAAI,iBAAe,CAAC;AACzC,aAAG,oBAAoB,EAAI,mBAAiB,CAAC;AAC7C,aAAG,aAAa,EAAI,YAAU,CAAC;AAC/B,aAAG,QAAQ,EAAI,CAAA,WAAU,QAAQ,AAAC,CAAC,IAAG,CAAG,KAAG,CAAC,CAAC;AAC9C,aAAG,cAAc,EAAI,aAAW,CAAC;QAhEa,AAiEhD,CAjEiD;AACzC,aAAO,CAAA,CAAC,eAAc,YAAY,CAAC,AAAC;AAiE5C,oBAAU,CAAV,UAAY,SAAQ,CAAG,CAAA,QAAO;;AAC5B,AAAI,cAAA,CAAA,WAAU,EAAI,CAAA,WAAU,IAAI,AAAC,CAAC,IAAG,mBAAmB,AAAC,CAAC,QAAO,CAAC,GAAG,SAAC,CAAA;mBAAM,CAAA,YAAW,KAAK,AAAC,CAAC,CAAA,CAAC;YAAA,EAAC,CAAC;AACjG,AAAI,cAAA,CAAA,WAAU,EAAI,CAAA,IAAG,QAAQ,KAAK,AAAC,CAAC,SAAQ,CAAC,CAAC;AAC9C,AAAI,cAAA,CAAA,WAAU,EAAI,CAAA,IAAG,gBAAgB,eAAe,AAAC,CAAC,QAAO,CAAC,CAAC;AAC/D,iBAAO,CAAA,kBAAiB,AAAC,CAAC,IAAG,iBAAiB,CAAG,CAAA,IAAG,QAAQ,CAAG,YAAU,CAAG,YAAU,CAAG,CAAA,IAAG,mBAAmB,CAAG,YAAU,CAAG,CAAA,IAAG,cAAc,CAAC,CAAC;UACpJ;AACA,gBAAM,CAAN,UAAQ,SAAQ,CAAG;AACjB,AAAI,cAAA,CAAA,SAAQ,EAAI,CAAA,IAAG,SAAS,AAAC,CAAC,SAAQ,CAAC,CAAC;AACxC,iBAAO,CAAA,cAAa,UAAU,AAAC,CAAC,SAAQ,CAAC,CAAA,CAAI,UAAQ,EAAI,CAAA,cAAa,QAAQ,AAAC,CAAC,SAAQ,CAAC,CAAC;UAC5F;AACA,iBAAO,CAAP,UAAS,SAAQ;;AACf,AAAI,cAAA,CAAA,SAAQ,EAAI,CAAA,IAAG,eAAe,IAAI,AAAC,CAAC,SAAQ,CAAC,CAAC;AAClD,eAAI,SAAQ,AAAC,CAAC,SAAQ,CAAC,CAAG;AACxB,mBAAO,UAAQ,CAAC;YAClB;AAAA,AACI,cAAA,CAAA,SAAQ,EAAI,CAAA,UAAS,IAAI,AAAC,CAAC,IAAG,WAAW,CAAG,UAAQ,CAAC,CAAC;AAC1D,eAAI,SAAQ,AAAC,CAAC,SAAQ,CAAC,CAAG;AACxB,mBAAO,UAAQ,CAAC;YAClB;AAAA,AACI,cAAA,CAAA,QAAO,EAAI,CAAA,IAAG,kBAAkB,QAAQ,AAAC,CAAC,SAAQ,CAAC,CAAC;AACxD,AAAI,cAAA,CAAA,YAAW,EAAI,CAAA,IAAG,oBAAoB,OAAO,AAAC,CAAC,SAAQ,CAAC,CAAC;AAC7D,AAAI,cAAA,CAAA,OAAM,EAAI,CAAA,IAAG,aAAa,QAAQ,AAAC,CAAC,IAAG,QAAQ,CAAG,aAAW,CAAC,CAAC;AACnE,eAAG,gBAAgB,WAAW,AAAC,CAAC,QAAO,CAAG,QAAM,CAAC,CAAC;AAClD,AAAI,cAAA,CAAA,UAAS,EAAI,CAAA,IAAG,gBAAgB,KAAK,AAAC,CAAC,QAAO,CAAC,CAAC;AACpD,eAAI,cAAa,UAAU,AAAC,CAAC,UAAS,CAAC,CAAG;AACxC,sBAAQ,EAAI,CAAA,cAAa,KAAK,AAAC,CAAC,UAAS,GAAG,SAAC,EAAC;qBAAM,CAAA,qBAAoB,AAAC,CAAC,QAAO,CAAG,GAAC,CAAG,UAAQ,CAAC;cAAA,IAAG,SAAC,CAAA,CAAM;AACzG,oBAAM,IAAI,cAAY,AAAC,EAAC,kCAAkC,EAAC,CAAA,SAAQ,AAAC,CAAC,SAAQ,CAAC,EAAG,CAAC;cACpF,EAAC,CAAC;AACF,uBAAS,IAAI,AAAC,CAAC,IAAG,WAAW,CAAG,UAAQ,CAAG,UAAQ,CAAC,CAAC;AACrD,mBAAO,UAAQ,CAAC;YAClB;AAAA,AACA,iBAAO,CAAA,IAAG,iBAAiB,AAAC,CAAC,QAAO,CAAG,WAAS,CAAG,UAAQ,CAAC,CAAC;UAC/D;AACA,yBAAe,CAAf,UAAiB,QAAO,CAAG,CAAA,UAAS,CAAG,CAAA,SAAQ;AAC7C,AAAI,cAAA,CAAA,QAAO,EAAI,IAAI,gBAAc,AAAC,CAAC,IAAG,YAAY,AAAC,CAAC,SAAQ,CAAG,SAAO,CAAC,CAAC,CAAC;AACzE,AAAI,cAAA,CAAA,eAAc,CAAC;AACnB,cAAI;AACF,4BAAc,EAAI,CAAA,QAAO,QAAQ,AAAC,CAAC,UAAS,CAAG,CAAA,SAAQ,AAAC,CAAC,SAAQ,CAAC,CAAC,CAAC;YACtE,CAAE,OAAO,EAAC,CAAG;AACX,mBAAO,CAAA,cAAa,OAAO,AAAC,CAAC,EAAC,CAAC,CAAC;YAClC;AAAA,AACI,cAAA,CAAA,SAAQ,EAAI,CAAA,eAAc,CAAE,CAAA,CAAC,mBAAmB,CAAC;AACrD,eAAG,eAAe,IAAI,AAAC,CAAC,SAAQ,CAAG,UAAQ,CAAC,CAAC;AAC7C,qBAAS,OAAO,AAAC,CAAC,IAAG,WAAW,CAAG,UAAQ,CAAC,CAAC;AAC7C,AAAI,cAAA,CAAA,gBAAe,EAAI,GAAC,CAAC;AACzB,gBAAS,GAAA,CAAA,CAAA,EAAI,EAAA,CAAG,CAAA,CAAA,EAAI,CAAA,eAAc,OAAO,CAAG,CAAA,CAAA,EAAE,CAAG;AAC/C,AAAI,gBAAA,CAAA,EAAC,EAAI,CAAA,eAAc,CAAE,CAAA,CAAC,CAAC;AAC3B,iBAAI,EAAC,cAAc,CAAG;AACpB,mBAAG,wBAAwB,AAAC,CAAC,EAAC,CAAG,iBAAe,CAAC,CAAC;cACpD;AAAA,YACF;AAAA,AACA,eAAI,SAAQ,cAAc,OAAO,EAAI,EAAA,CAAG;AACtC,AAAI,gBAAA,CAAA,aAAY,EAAI,UAAQ,CAAC;AAC7B,sBAAQ,EAAI,CAAA,cAAa,IAAI,AAAC,CAAC,aAAY,cAAc,CAAC,KAAK,AAAC,EAAC,SAAC,CAAA;qBAAM,cAAY;cAAA,EAAC,CAAC;YACxF;AAAA,AACA,eAAI,gBAAe,OAAO,EAAI,EAAA,CAAG;AAC/B,mBAAO,CAAA,cAAa,KAAK,AAAC,CAAC,cAAa,IAAI,AAAC,CAAC,gBAAe,CAAC,GAAG,SAAC,CAAA;qBAAM,UAAQ;cAAA,IAAG,SAAC,CAAA,CAAM;AACxF,oBAAM,IAAI,cAAY,AAAC,EAAI,CAAA,QAAQ,EAAC,yBAAwB,EAAC,CAAA,SAAQ,AAAC,CAAC,SAAQ,CAAC,EAAG,CAAC;cACtF,EAAC,CAAC;YACJ;AAAA,AACA,iBAAO,UAAQ,CAAC;UAClB;AACA,gCAAsB,CAAtB,UAAwB,EAAC,CAAG,CAAA,QAAO,CAAG;AACpC,AAAI,cAAA,CAAA,SAAQ,EAAI,CAAA,IAAG,SAAS,AAAC,CAAC,EAAC,mBAAmB,KAAK,CAAC,CAAC;AACzD,eAAI,cAAa,UAAU,AAAC,CAAC,SAAQ,CAAC,CAAG;AACvC,wBAAU,KAAK,AAAC,CAAC,QAAO,CAAG,CAAA,SAAQ,KAAK,AAAC,CAAC,SAAS,EAAC,CAAG;AACrD,iBAAC,uBAAuB,gBAAgB,EAAI,GAAC,CAAC;cAChD,CAAC,CAAC,CAAC;YACL,KAAO;AACL,eAAC,uBAAuB,gBAAgB,EAAI,UAAQ,CAAC;YACvD;AAAA,UACF;AACA,2BAAiB,CAAjB,UAAmB,QAAO,CAAG;AAC3B,eAAI,OAAM,AAAC,CAAC,QAAO,WAAW,CAAC;AAC7B,mBAAO,GAAC,CAAC;AAAA,AACP,cAAA,CAAA,UAAS,EAAI,GAAC,CAAC;AACnB,eAAG,aAAa,AAAC,CAAC,QAAO,WAAW,CAAG,WAAS,CAAC,CAAC;AAClD,iBAAO,WAAS,CAAC;UACnB;AACA,qBAAW,CAAX,UAAa,IAAG,CAAG,CAAA,GAAE,CAAG;AACtB,gBAAS,GAAA,CAAA,CAAA,EAAI,EAAA,CAAG,CAAA,CAAA,EAAI,CAAA,IAAG,OAAO,CAAG,CAAA,CAAA,EAAE,CAAG;AACpC,AAAI,gBAAA,CAAA,IAAG,EAAI,CAAA,IAAG,CAAE,CAAA,CAAC,CAAC;AAClB,iBAAI,WAAU,OAAO,AAAC,CAAC,IAAG,CAAC,CAAG;AAC5B,mBAAG,aAAa,AAAC,CAAC,IAAG,CAAG,IAAE,CAAC,CAAC;cAC9B,KAAO;AACL,0BAAU,KAAK,AAAC,CAAC,GAAE,CAAG,KAAG,CAAC,CAAC;cAC7B;AAAA,YACF;AAAA,UACF;AAAA,aAxJ8D,CAAC;MACzD,AAAC,EAAC,EAJ4D;AA6JtE,WAAK,eAAe,AAAC,CAAC,QAAO,CAAG,cAAY,CAAG,EAAC,GAAE,CAAG,UAAQ,AAAC,CAAE;AAC5D,eAAO,EAAC,GAAI,WAAS,AAAC,EAAC,CAAC,CAAC;QAC3B,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,QAAO,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAQ,AAAC,CAAE;AAC3D,eAAO,EAAC,CAAC,eAAc,CAAC,CAAG,EAAC,cAAa,CAAC,CAAG,EAAC,uBAAsB,CAAC,CAAG,EAAC,MAAK,CAAC,CAAG,EAAC,aAAY,CAAC,CAAG,EAAC,iBAAgB,CAAC,CAAG,EAAC,gBAAe,CAAC,CAAG,EAAC,kBAAiB,CAAC,CAAG,EAAC,WAAU,CAAC,CAAG,EAAC,YAAW,CAAC,CAAC,CAAC;QAClM,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,QAAO,UAAU,YAAY,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAQ,AAAC,CAAE;AACjF,eAAO,EAAC,CAAC,IAAG,CAAC,CAAG,EAAC,QAAO,CAAC,CAAC,CAAC;QAC7B,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,QAAO,UAAU,QAAQ,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAQ,AAAC,CAAE;AAC7E,eAAO,EAAC,CAAC,IAAG,CAAC,CAAC,CAAC;QACjB,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,QAAO,UAAU,SAAS,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAQ,AAAC,CAAE;AAC9E,eAAO,EAAC,CAAC,IAAG,CAAC,CAAC,CAAC;QACjB,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,QAAO,UAAU,iBAAiB,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAQ,AAAC,CAAE;AACtF,eAAO,EAAC,CAAC,QAAO,CAAC,CAAG,GAAC,CAAG,EAAC,IAAG,CAAC,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,QAAO,UAAU,wBAAwB,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAQ,AAAC,CAAE;AAC7F,eAAO,EAAC,CAAC,cAAa,CAAC,CAAG,EAAC,MAAK,YAAY,AAAC,CAAC,IAAG,CAAG,QAAM,CAAC,CAAC,CAAC,CAAC;QAChE,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,QAAO,UAAU,mBAAmB,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAQ,AAAC,CAAE;AACxF,eAAO,EAAC,CAAC,QAAO,CAAC,CAAC,CAAC;QACrB,CAAC,CAAC,CAAC;AACL,WAAK,eAAe,AAAC,CAAC,QAAO,UAAU,aAAa,CAAG,aAAW,CAAG,EAAC,GAAE,CAAG,UAAQ,AAAC,CAAE;AAClF,eAAO,EAAC,CAAC,MAAK,YAAY,AAAC,CAAC,IAAG,CAAG,CAAA,MAAK,KAAK,IAAI,CAAC,CAAC,CAAG,EAAC,MAAK,YAAY,AAAC,CAAC,IAAG,CAAG,KAAG,CAAC,CAAC,CAAC,CAAC;QACxF,CAAC,CAAC,CAAC;IArL0B;EAC3B,CAAA;AADI,CAAC,CAAC;AAwLwB","file":"src/core/compiler/compiler.js","sourceRoot":"/Users/justin/workspace/angular2_quckstart/quickstart/node_modules/angular2/es6/prod/","sourcesContent":["import {Injectable} from 'angular2/di';\nimport {Type,\n  isBlank,\n  isPresent,\n  BaseException,\n  normalizeBlank,\n  stringify} from 'angular2/src/facade/lang';\nimport {Promise,\n  PromiseWrapper} from 'angular2/src/facade/async';\nimport {List,\n  ListWrapper,\n  Map,\n  MapWrapper} from 'angular2/src/facade/collection';\nimport {ChangeDetection,\n  Parser} from 'angular2/change_detection';\nimport {DirectiveMetadataReader} from './directive_metadata_reader';\nimport {ProtoView} from './view';\nimport {CompilePipeline} from './pipeline/compile_pipeline';\nimport {CompileElement} from './pipeline/compile_element';\nimport {createDefaultSteps} from './pipeline/default_steps';\nimport {TemplateLoader} from './template_loader';\nimport {TemplateResolver} from './template_resolver';\nimport {Template} from '../annotations/template';\nimport {ShadowDomStrategy} from './shadow_dom_strategy';\nimport {CompileStep} from './pipeline/compile_step';\nimport {ComponentUrlMapper} from './component_url_mapper';\nimport {UrlResolver} from './url_resolver';\nimport {CssProcessor} from './css_processor';\nexport class CompilerCache {\n  constructor() {\n    this._cache = MapWrapper.create();\n  }\n  set(component, protoView) {\n    MapWrapper.set(this._cache, component, protoView);\n  }\n  get(component) {\n    var result = MapWrapper.get(this._cache, component);\n    return normalizeBlank(result);\n  }\n  clear() {\n    MapWrapper.clear(this._cache);\n  }\n}\nObject.defineProperty(CompilerCache, \"annotations\", {get: function() {\n    return [new Injectable()];\n  }});\nObject.defineProperty(CompilerCache.prototype.set, \"parameters\", {get: function() {\n    return [[Type], [ProtoView]];\n  }});\nObject.defineProperty(CompilerCache.prototype.get, \"parameters\", {get: function() {\n    return [[Type]];\n  }});\nexport class Compiler {\n  constructor(changeDetection, templateLoader, reader, parser, cache, shadowDomStrategy, templateResolver, componentUrlMapper, urlResolver, cssProcessor) {\n    this._changeDetection = changeDetection;\n    this._reader = reader;\n    this._parser = parser;\n    this._compilerCache = cache;\n    this._templateLoader = templateLoader;\n    this._compiling = MapWrapper.create();\n    this._shadowDomStrategy = shadowDomStrategy;\n    this._templateResolver = templateResolver;\n    this._componentUrlMapper = componentUrlMapper;\n    this._urlResolver = urlResolver;\n    this._appUrl = urlResolver.resolve(null, './');\n    this._cssProcessor = cssProcessor;\n  }\n  createSteps(component, template) {\n    var dirMetadata = ListWrapper.map(this._flattenDirectives(template), (d) => this._reader.read(d));\n    var cmpMetadata = this._reader.read(component);\n    var templateUrl = this._templateLoader.getTemplateUrl(template);\n    return createDefaultSteps(this._changeDetection, this._parser, cmpMetadata, dirMetadata, this._shadowDomStrategy, templateUrl, this._cssProcessor);\n  }\n  compile(component) {\n    var protoView = this._compile(component);\n    return PromiseWrapper.isPromise(protoView) ? protoView : PromiseWrapper.resolve(protoView);\n  }\n  _compile(component) {\n    var protoView = this._compilerCache.get(component);\n    if (isPresent(protoView)) {\n      return protoView;\n    }\n    var pvPromise = MapWrapper.get(this._compiling, component);\n    if (isPresent(pvPromise)) {\n      return pvPromise;\n    }\n    var template = this._templateResolver.resolve(component);\n    var componentUrl = this._componentUrlMapper.getUrl(component);\n    var baseUrl = this._urlResolver.resolve(this._appUrl, componentUrl);\n    this._templateLoader.setBaseUrl(template, baseUrl);\n    var tplElement = this._templateLoader.load(template);\n    if (PromiseWrapper.isPromise(tplElement)) {\n      pvPromise = PromiseWrapper.then(tplElement, (el) => this._compileTemplate(template, el, component), (_) => {\n        throw new BaseException(`Failed to load the template for ${stringify(component)}`);\n      });\n      MapWrapper.set(this._compiling, component, pvPromise);\n      return pvPromise;\n    }\n    return this._compileTemplate(template, tplElement, component);\n  }\n  _compileTemplate(template, tplElement, component) {\n    var pipeline = new CompilePipeline(this.createSteps(component, template));\n    var compileElements;\n    try {\n      compileElements = pipeline.process(tplElement, stringify(component));\n    } catch (ex) {\n      return PromiseWrapper.reject(ex);\n    }\n    var protoView = compileElements[0].inheritedProtoView;\n    this._compilerCache.set(component, protoView);\n    MapWrapper.delete(this._compiling, component);\n    var nestedPVPromises = [];\n    for (var i = 0; i < compileElements.length; i++) {\n      var ce = compileElements[i];\n      if (ce.hasNestedView) {\n        this._compileNestedProtoView(ce, nestedPVPromises);\n      }\n    }\n    if (protoView.stylePromises.length > 0) {\n      var syncProtoView = protoView;\n      protoView = PromiseWrapper.all(syncProtoView.stylePromises).then((_) => syncProtoView);\n    }\n    if (nestedPVPromises.length > 0) {\n      return PromiseWrapper.then(PromiseWrapper.all(nestedPVPromises), (_) => protoView, (e) => {\n        throw new BaseException(`${e.message} -> Failed to compile ${stringify(component)}`);\n      });\n    }\n    return protoView;\n  }\n  _compileNestedProtoView(ce, promises) {\n    var protoView = this._compile(ce.componentDirective.type);\n    if (PromiseWrapper.isPromise(protoView)) {\n      ListWrapper.push(promises, protoView.then(function(pv) {\n        ce.inheritedElementBinder.nestedProtoView = pv;\n      }));\n    } else {\n      ce.inheritedElementBinder.nestedProtoView = protoView;\n    }\n  }\n  _flattenDirectives(template) {\n    if (isBlank(template.directives))\n      return [];\n    var directives = [];\n    this._flattenList(template.directives, directives);\n    return directives;\n  }\n  _flattenList(tree, out) {\n    for (var i = 0; i < tree.length; i++) {\n      var item = tree[i];\n      if (ListWrapper.isList(item)) {\n        this._flattenList(item, out);\n      } else {\n        ListWrapper.push(out, item);\n      }\n    }\n  }\n}\nObject.defineProperty(Compiler, \"annotations\", {get: function() {\n    return [new Injectable()];\n  }});\nObject.defineProperty(Compiler, \"parameters\", {get: function() {\n    return [[ChangeDetection], [TemplateLoader], [DirectiveMetadataReader], [Parser], [CompilerCache], [ShadowDomStrategy], [TemplateResolver], [ComponentUrlMapper], [UrlResolver], [CssProcessor]];\n  }});\nObject.defineProperty(Compiler.prototype.createSteps, \"parameters\", {get: function() {\n    return [[Type], [Template]];\n  }});\nObject.defineProperty(Compiler.prototype.compile, \"parameters\", {get: function() {\n    return [[Type]];\n  }});\nObject.defineProperty(Compiler.prototype._compile, \"parameters\", {get: function() {\n    return [[Type]];\n  }});\nObject.defineProperty(Compiler.prototype._compileTemplate, \"parameters\", {get: function() {\n    return [[Template], [], [Type]];\n  }});\nObject.defineProperty(Compiler.prototype._compileNestedProtoView, \"parameters\", {get: function() {\n    return [[CompileElement], [assert.genericType(List, Promise)]];\n  }});\nObject.defineProperty(Compiler.prototype._flattenDirectives, \"parameters\", {get: function() {\n    return [[Template]];\n  }});\nObject.defineProperty(Compiler.prototype._flattenList, \"parameters\", {get: function() {\n    return [[assert.genericType(List, assert.type.any)], [assert.genericType(List, Type)]];\n  }});\n//# sourceMappingURL=compiler.js.map\n\n//# sourceMappingURL=./compiler.map"]}