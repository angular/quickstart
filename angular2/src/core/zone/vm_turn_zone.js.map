{"version":3,"sources":["@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/3","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/6","@traceur/generated/TemplateParser/10","src/core/zone/vm_turn_zone.es6","src/core/zone/vm_turn_zone.js"],"names":[],"mappings":"AAAA,KAAK,SAAS,AAAC,gEAAoB,UAAS,SAAQ;;;;;;;;;ACApD,OAAO;AACD,UAAM,GCDZ,SAAS,IAAG;ACAZ,WAAoB,KAAG,KAAkB,CAAC;AAA1C,kBAAoB,KAAG,YAAkB,CAAC;AAA1C,uBAAoB,KAAG,iBAAkB,CAAC;IDElC,CAFR,UAAS,IAAG;ACAZ,qBAAoB,KAAG,eAAkB,CAAC;AAA1C,gBAAoB,KAAG,UAAkB,CAAC;AAA1C,aAAoB,KAAG,OAAkB,CAAC;IDElC,CDDuB;AACzB,UAAM;iBGFY,CAAA,SAAQ,AAAC,gBCAjC,SAAQ,AAAC;AACC,AAAI,UAAA,aCEP,SAAM,WAAS,CAUP,IAAoB;YAApB,qBAAmB;AAC9B,aAAG,kBAAkB,EAAI,EAAA,CAAC;AAC1B,aAAG,aAAa,EAAI,KAAG,CAAC;AACxB,aAAG,YAAY,EAAI,KAAG,CAAC;AACvB,aAAG,gBAAgB,EAAI,KAAG,CAAC;AAE3B,aAAG,WAAW,EAAI,CAAA,MAAK,KAAK,CAAC;AAC7B,aAAG,WAAW,EAAI,CAAA,IAAG,iBAAkB,AAAC,CAAA,IAAG,WAAW,CAAG,qBAAmB,CAAC,CAAC;QDnBhC,ACuFlD,CDvFmD;AACzC,aAAO,CAAA,CAAC,eAAc,YAAY,CAAC,AAAC;ACqB5C,sBAAY,CAAZ,UAAe,AAAiE;gEAAD,GAAC;AAAjE,0BAAU;AAAG,yBAAS;AAAG,kCAAkB;AAAG,6BAAa;AACxE,eAAG,aAAa,EAAI,CAAA,cAAc,AAAC,CAAA,WAAU,CAAC,CAAC;AAC/C,eAAG,YAAY,EAAI,CAAA,cAAc,AAAC,CAAA,UAAS,CAAC,CAAC;AAC7C,eAAG,gBAAgB,EAAI,CAAA,cAAa,AAAE,CAAA,cAAa,CAAC,CAAC;UACvD;AAEA,YAAE,CAAF,UAAI,EAAC,CAAG;AACN,iBAAO,CAAA,IAAG,WAAW,IAAI,AAAE,CAAA,EAAC,CAAC,CAAC;UAChC;AAEA,0BAAgB,CAAhB,UAAkB,EAAC,CAAG;AACpB,iBAAO,CAAA,IAAG,WAAW,IAAK,AAAC,CAAA,EAAC,CAAC,CAAC;UAChC;AAEA,yBAAe,CAAf,UAAiB,IAAG,CAAG,CAAA,oBAAmB;;AACpC,cAAA,CAAA,UAAS,EAAI,KAAG,CAAC;AACjB,cAAA,CAAA,aAAY,CAAC;AAEjB,eAAI,oBAAmB,CAAG;AACxB,0BAAY,EAAI,CAAA,gBAAe,MAAM,AAAE,CAAA,IAAG,mBAAmB,CAC3D,EAAA,OAAM,CAAG,UAAU,CAAA,CAAG;AACpB,2BAAS,SAAS,AAAE,CAAA,IAAG,CAAG,EAAA,CAAC,CAAA;gBAC7B,CACF,CAAC,CAAC;YACJ,KAAO;AACL,0BAAY,EACV,EAAA,OAAM,CAAG,UAAU,CAAA,CAAG;AACpB,2BAAS,SAAU,AAAC,CAAA,IAAG,CAAG,EAAA,CAAC,CAAA;gBAC7B,CACF,CAAC;YACH;AAAA,AAEA,iBAAO,CAAA,IAAG,KAAM,AAAC,CAAA,aAAY,CAAC,KAAK,AAAE,CAAA;AACnC,uBAAS,GAAI,SAAA,CAAK;AAAC,+BAAgB,EAAC,CAAA;cAAC,CAAA;AACrC,sBAAQ,GAAG,SAAA,AAAC,CAAK;AAAC,8BAAc,AAAC,EAAC,CAAA;cAAC,CAAA;YACrC,CAAC,CAAC;UACJ;AAEA,oBAAU,CAAV,UAAY,AAAC,CAAA;AACX,eAAG,kBAAkB,EAAG,CAAC;AACzB,eAAG,IAAG,kBAAkB,IAAM,EAAA,CAAA,EAAK,CAAA,IAAG,aAAa,CAAG;AACpD,iBAAG,aAAa,AAAC,EAAC,CAAC;YACrB;AAAA,UACF;AAEA,mBAAS,CAAT,UAAW,AAAC,CAAA;AACV,eAAG,kBAAkB,EAAG,CAAC;AACzB,eAAG,IAAG,kBAAkB,IAAM,EAAA,CAAA,EAAK,CAAA,IAAG,YAAY,CAAG;AACnD,iBAAG,YAAY,AAAC,EAAC,CAAC;YACpB;AAAA,UACF;AAEA,iBAAO,CAAP,UAAS,IAAG,CAAG,CAAA,CAAA,CAAG;AAChB,eAAI,SAAS,AAAC,CAAA,IAAG,gBAAgB,CAAC,CAAG;AAC/B,gBAAA,CAAA,KAAI,EAAK,EAAA,cAAc,AAAC,CAAA,CAAA,MAAM,CAAC,CAAC,CAAC;AAErC,oBAAO,IAAG,GAAK,CAAA,IAAG,uBAAuB,CAAG;AAC1C,oBAAI,KAAK,AAAE,CAAA,IAAG,uBAAuB,IAAK,EAAC,CAAC,CAAC;AAC7C,mBAAG,EAAI,CAAA,IAAG,OAAO,CAAC;cACpB;AAAA,AACA,iBAAG,gBAAgB,AAAE,CAAA,CAAA,CAAG,MAAI,CAAC,CAAC;YAChC,KAAO;AACL,kBAAM,EAAA,CAAC;YACT;AAAA,UACF;AAAA,aDpF8D,CAAC;MACzD,AAAC,EAAC,EDJ4D;IHEvC;EAC3B,CAAA;ADDI,CAAC,CAAC;AO4E4B","file":"src/core/zone/vm_turn_zone.js","sourceRoot":"/Users/deast/Angular/quickstart/node_modules/angular2/es6/prod/","sourcesContent":["System.register($__placeholder__0, function($__export) {\n          $__placeholder__1\n        });","return {\n      setters: $__placeholder__0,\n      execute: $__placeholder__1\n    }","function($__m) {\n          $__placeholder__0\n        }","$__placeholder__0 = $__m.$__placeholder__1;","var $__placeholder__0 = $__export($__placeholder__1, $__placeholder__2);","function() {\n          var $__placeholder__0 = $__placeholder__1;\n          return ($traceurRuntime.createClass)($__placeholder__2, $__placeholder__3,\n                                               $__placeholder__4);\n        }()","import {List, ListWrapper, StringMapWrapper} from 'angular2/src/facade/collection';\nimport {normalizeBlank, isPresent, global} from 'angular2/src/facade/lang';\n\nexport class VmTurnZone {\n  _outerZone;\n  _innerZone;\n\n  _onTurnStart:Function;\n  _onTurnDone:Function;\n  _onErrorHandler:Function;\n\n  _nestedRunCounter:number;\n\n  constructor({enableLongStackTrace}) {\n    this._nestedRunCounter = 0;\n    this._onTurnStart = null;\n    this._onTurnDone = null;\n    this._onErrorHandler = null;\n\n    this._outerZone = global.zone;\n    this._innerZone = this._createInnerZone(this._outerZone, enableLongStackTrace);\n  }\n\n  initCallbacks({onTurnStart, onTurnDone, onScheduleMicrotask, onErrorHandler} = {}) {\n    this._onTurnStart = normalizeBlank(onTurnStart);\n    this._onTurnDone = normalizeBlank(onTurnDone);\n    this._onErrorHandler = normalizeBlank(onErrorHandler);\n  }\n\n  run(fn) {\n    return this._innerZone.run(fn);\n  }\n\n  runOutsideAngular(fn) {\n    return this._outerZone.run(fn);\n  }\n\n  _createInnerZone(zone, enableLongStackTrace) {\n    var vmTurnZone = this;\n    var errorHandling;\n\n    if (enableLongStackTrace) {\n      errorHandling = StringMapWrapper.merge(Zone.longStackTraceZone, {\n        onError: function (e) {\n          vmTurnZone._onError(this, e)\n        }\n      });\n    } else {\n      errorHandling = {\n        onError: function (e) {\n          vmTurnZone._onError(this, e)\n        }\n      };\n    }\n\n    return zone.fork(errorHandling).fork({\n      beforeTask: () => {this._beforeTask()},\n      afterTask: () => {this._afterTask()}\n    });\n  }\n\n  _beforeTask(){\n    this._nestedRunCounter ++;\n    if(this._nestedRunCounter === 1 && this._onTurnStart) {\n      this._onTurnStart();\n    }\n  }\n\n  _afterTask(){\n    this._nestedRunCounter --;\n    if(this._nestedRunCounter === 0 && this._onTurnDone) {\n      this._onTurnDone();\n    }\n  }\n\n  _onError(zone, e) {\n    if (isPresent(this._onErrorHandler)) {\n      var trace = [normalizeBlank(e.stack)];\n\n      while (zone && zone.constructedAtException) {\n        trace.push(zone.constructedAtException.get());\n        zone = zone.parent;\n      }\n      this._onErrorHandler(e, trace);\n    } else {\n      throw e;\n    }\n  }\n}","import {List,\n  ListWrapper,\n  StringMapWrapper} from 'angular2/src/facade/collection';\nimport {normalizeBlank,\n  isPresent,\n  global} from 'angular2/src/facade/lang';\nexport class VmTurnZone {\n  constructor({enableLongStackTrace}) {\n    this._nestedRunCounter = 0;\n    this._onTurnStart = null;\n    this._onTurnDone = null;\n    this._onErrorHandler = null;\n    this._outerZone = global.zone;\n    this._innerZone = this._createInnerZone(this._outerZone, enableLongStackTrace);\n  }\n  initCallbacks({onTurnStart,\n    onTurnDone,\n    onScheduleMicrotask,\n    onErrorHandler} = {}) {\n    this._onTurnStart = normalizeBlank(onTurnStart);\n    this._onTurnDone = normalizeBlank(onTurnDone);\n    this._onErrorHandler = normalizeBlank(onErrorHandler);\n  }\n  run(fn) {\n    return this._innerZone.run(fn);\n  }\n  runOutsideAngular(fn) {\n    return this._outerZone.run(fn);\n  }\n  _createInnerZone(zone, enableLongStackTrace) {\n    var vmTurnZone = this;\n    var errorHandling;\n    if (enableLongStackTrace) {\n      errorHandling = StringMapWrapper.merge(Zone.longStackTraceZone, {onError: function(e) {\n          vmTurnZone._onError(this, e);\n        }});\n    } else {\n      errorHandling = {onError: function(e) {\n          vmTurnZone._onError(this, e);\n        }};\n    }\n    return zone.fork(errorHandling).fork({\n      beforeTask: () => {\n        this._beforeTask();\n      },\n      afterTask: () => {\n        this._afterTask();\n      }\n    });\n  }\n  _beforeTask() {\n    this._nestedRunCounter++;\n    if (this._nestedRunCounter === 1 && this._onTurnStart) {\n      this._onTurnStart();\n    }\n  }\n  _afterTask() {\n    this._nestedRunCounter--;\n    if (this._nestedRunCounter === 0 && this._onTurnDone) {\n      this._onTurnDone();\n    }\n  }\n  _onError(zone, e) {\n    if (isPresent(this._onErrorHandler)) {\n      var trace = [normalizeBlank(e.stack)];\n      while (zone && zone.constructedAtException) {\n        trace.push(zone.constructedAtException.get());\n        zone = zone.parent;\n      }\n      this._onErrorHandler(e, trace);\n    } else {\n      throw e;\n    }\n  }\n}\n\n//# sourceMappingURL=/Users/tbosch/projects/temp/angular2_clone/modules/angular2/src/core/zone/vm_turn_zone.map\n\n//# sourceMappingURL=./vm_turn_zone.map"]}