{"version":3,"sources":["event_manager.js"],"names":[],"mappings":"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","file":"src/core/events/event_manager.js","sourceRoot":"/Users/justin/workspace/angular2_quckstart/quickstart/node_modules/angular2/es6/prod/","sourcesContent":["import {isBlank,\n  BaseException,\n  isPresent,\n  StringWrapper} from 'angular2/src/facade/lang';\nimport {DOM} from 'angular2/src/dom/dom_adapter';\nimport {List,\n  ListWrapper,\n  MapWrapper} from 'angular2/src/facade/collection';\nimport {VmTurnZone} from 'angular2/src/core/zone/vm_turn_zone';\nvar BUBBLE_SYMBOL = '^';\nexport class EventManager {\n  constructor(plugins, zone) {\n    this._zone = zone;\n    this._plugins = plugins;\n    for (var i = 0; i < plugins.length; i++) {\n      plugins[i].manager = this;\n    }\n  }\n  addEventListener(element, eventName, handler) {\n    var shouldSupportBubble = eventName[0] == BUBBLE_SYMBOL;\n    if (shouldSupportBubble) {\n      eventName = StringWrapper.substring(eventName, 1);\n    }\n    var plugin = this._findPluginFor(eventName);\n    plugin.addEventListener(element, eventName, handler, shouldSupportBubble);\n  }\n  getZone() {\n    return this._zone;\n  }\n  _findPluginFor(eventName) {\n    var plugins = this._plugins;\n    for (var i = 0; i < plugins.length; i++) {\n      var plugin = plugins[i];\n      if (plugin.supports(eventName)) {\n        return plugin;\n      }\n    }\n    throw new BaseException(`No event manager plugin found for event ${eventName}`);\n  }\n}\nObject.defineProperty(EventManager, \"parameters\", {get: function() {\n    return [[assert.genericType(List, EventManagerPlugin)], [VmTurnZone]];\n  }});\nObject.defineProperty(EventManager.prototype.addEventListener, \"parameters\", {get: function() {\n    return [[], [assert.type.string], [Function]];\n  }});\nObject.defineProperty(EventManager.prototype._findPluginFor, \"parameters\", {get: function() {\n    return [[assert.type.string]];\n  }});\nexport class EventManagerPlugin {\n  supports(eventName) {\n    return false;\n  }\n  addEventListener(element, eventName, handler, shouldSupportBubble) {\n    throw \"not implemented\";\n  }\n}\nObject.defineProperty(EventManagerPlugin.prototype.supports, \"parameters\", {get: function() {\n    return [[assert.type.string]];\n  }});\nObject.defineProperty(EventManagerPlugin.prototype.addEventListener, \"parameters\", {get: function() {\n    return [[], [assert.type.string], [Function], [assert.type.boolean]];\n  }});\nexport class DomEventsPlugin extends EventManagerPlugin {\n  supports(eventName) {\n    return true;\n  }\n  addEventListener(element, eventName, handler, shouldSupportBubble) {\n    var outsideHandler = shouldSupportBubble ? DomEventsPlugin.bubbleCallback(element, handler, this.manager._zone) : DomEventsPlugin.sameElementCallback(element, handler, this.manager._zone);\n    this.manager._zone.runOutsideAngular(() => {\n      DOM.on(element, eventName, outsideHandler);\n    });\n  }\n  static sameElementCallback(element, handler, zone) {\n    return (event) => {\n      if (event.target === element) {\n        zone.run(() => handler(event));\n      }\n    };\n  }\n  static bubbleCallback(element, handler, zone) {\n    return (event) => zone.run(() => handler(event));\n  }\n}\nObject.defineProperty(DomEventsPlugin.prototype.supports, \"parameters\", {get: function() {\n    return [[assert.type.string]];\n  }});\nObject.defineProperty(DomEventsPlugin.prototype.addEventListener, \"parameters\", {get: function() {\n    return [[], [assert.type.string], [Function], [assert.type.boolean]];\n  }});\n//# sourceMappingURL=event_manager.js.map\n\n//# sourceMappingURL=./event_manager.map"]}